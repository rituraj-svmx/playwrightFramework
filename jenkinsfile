pipeline {
  agent any
  parameters {
    choice(name: 'TestCasesGroup', choices: ['Regression','web'], description: 'npm script to run')
  }
  stages {
    stage('Install'){ steps { bat 'npm ci' ; bat 'npx playwright install' } }
    stage('Test'){ steps { bat "npm run %TestCasesGroup%" } }
  }
  post {
    always {
      // Either generate static report, or use the Allure plugin below
      bat 'npm run allure:report || exit /b 0'
      // allure results: [[path: 'allure-results']]
    }
  }
}